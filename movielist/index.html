<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>List Film - MovLeebs</title>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
    <link href="../css/app.css" rel="stylesheet" />
    <script src="../api.js"></script>
    <script src="../alpineApp.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/js/all.min.js"
      integrity="sha512-6BTOlkauINO65nLhXhthZMtepgJSghyimIalb+crKRPhvhmsCdnIuGcVbR5/aQY2A+260iC1OPy1oCdB6pSSwQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
  </head>
  <body
    x-data="movieApp"
    class="bg-background flex flex-col justify-center items-center"
  >
    <header
      x-data="{mobileMenuOpen: false}"
      class="w-full bg-secondary h-[70px] lg:px-10 px-5 flex items-center justify-between sticky top-0 z-20"
    >
      <div class="flex gap-3">
        <img src="../img/icon.svg" class="w-[30px]" alt="icon" />
        <h1 class="poppins-bold text-primary text-2xl">
          Mov<span class="text-white">Leebs</span>
        </h1>
      </div>
      <nav class="poppins-regular lg:flex hidden text-white gap-10">
        <a class="hover:underline" href="../">Home</a>
        <a class="hover:underline" href="../detail-movie/">List Film</a>
        <a
          class="hover:underline"
          href="https://github.com/Mazees/movleebs.git"
          target="_blank"
          >Source</a
        >
      </nav>
      <button class="ml-auto lg:hidden" @click="mobileMenuOpen=!mobileMenuOpen">
        <svg
          class="text-white"
          width="40px"
          height="40px"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M4 5C3.44772 5 3 5.44772 3 6C3 6.55228 3.44772 7 4 7H20C20.5523 7 21 6.55228 21 6C21 5.44772 20.5523 5 20 5H4ZM7 12C7 11.4477 7.44772 11 8 11H20C20.5523 11 21 11.4477 21 12C21 12.5523 20.5523 13 20 13H8C7.44772 13 7 12.5523 7 12ZM13 18C13 17.4477 13.4477 17 14 17H20C20.5523 17 21 17.4477 21 18C21 18.5523 20.5523 19 20 19H14C13.4477 19 13 18.5523 13 18Z"
            fill="currentColor"
          />
        </svg>
      </button>
      <div
        :class="mobileMenuOpen ? 'translate-x-0' : 'translate-x-full'"
        class="fixed bg-secondary lg:hidden flex flex-col items-center w-screen h-screen top-0 left-0 transition-all duration-500"
      >
        <img
          src="../img/icon.svg"
          class="h-[100px] w-full object-contain mb-10 mt-30"
        />
        <nav class="items-center justify-center flex flex-col gap-10">
          <ul
            id="beranda"
            class="text-white cursor-pointer transition-all duration-500 relative before:w-full before:h-[3px] before:bg-white before:absolute before:bottom-0 before:max-w-0 before:transition-all before:rounded-2xl hover:before:max-w-full poppins-light text-lg w-fit"
          >
            <a @click="mobileMenuOpen=!mobileMenuOpen" href="../">Home</a>
          </ul>
          <ul
            class="text-white cursor-pointer transition-all duration-500 relative before:w-full before:h-[3px] before:bg-white before:absolute before:bottom-0 before:max-w-0 before:transition-all before:rounded-2xl hover:before:max-w-full poppins-light text-lg w-fit"
          >
            <a @click="mobileMenuOpen=!mobileMenuOpen" href="../detail-movie/"
              >List Film</a
            >
          </ul>
          <ul
            class="text-white cursor-pointer transition-all duration-500 relative before:w-full before:h-[3px] before:bg-white before:absolute before:bottom-0 before:max-w-0 before:transition-all before:rounded-2xl hover:before:max-w-full poppins-light text-lg w-fit"
          >
            <a
              @click="mobileMenuOpen=!mobileMenuOpen"
              href="https://github.com/Mazees/movleebs.git"
              >Source</a
            >
          </ul>
        </nav>
        <a href="" target="_blank">
          <h1
            class="text-primary-dark bg-primary px-4 py-2 mt-10 rounded-lg poppins-regular hover:text-white"
          >
            COBA SEKARANG
          </h1>
        </a>
        <button
          class="fa-solid fa-circle-xmark absolute top-0 left-0 m-5 text-white text-3xl"
          @click="mobileMenuOpen=!mobileMenuOpen"
        >
          <?xml version="1.0" encoding="utf-8"?><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
          <svg
            width="1em"
            height="1em"
            viewBox="0 0 1024 1024"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill="currentColor"
              d="M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"
            />
          </svg>
        </button>
      </div>
    </header>
    <main class="lg:w-[70%] w-[80%] flex flex-col justify-center items-center">
      <div
        class="w-full flex px-5 lg:flex-row flex-col lg:gap-0 gap-3 justify-between mt-10 mb-5"
      >
        <div
          class="border-l-8 border-primary pl-3 poppins-regular text-white text-lg flex items-center"
        >
          Cari Film Favoritmu!
        </div>
        <div
          class="rounded-sm poppins-regular h-fit py-[5px] px-2.5 flex justify-between bg-tertiary"
        >
          <input
            class="mr-auto placeholder:text-sm text-primary text-sm focus:outline-none"
            type="text"
            x-model="keyword"
            name="cari"
            id="cari"
            placeholder="Search movies..."
          />
          <button @click="searchMovie(keyword)">
            <i
              class="fa-solid hover:text-white text-primary hover:cursor-pointer fa-magnifying-glass"
            ></i>
          </button>
        </div>
      </div>
      <div class="w-full mb-5 px-5 poppins-light">
        <div
          x-data="{ isOpen: false, openedWithKeyboard: false }"
          class="relative w-fit"
          x-on:keydown.esc.window="isOpen = false, openedWithKeyboard = false"
        >
          <!-- Toggle Button -->
          <button
            type="button"
            x-on:click="isOpen = ! isOpen"
            class="inline-flex items-center gap-2 whitespace-nowrap rounded-radius border border-outline bg-primary px-4 py-2 text-xs font-medium tracking-wide transition hover:opacity-75 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-outline-strong dark:border-outline-dark dark:bg-surface-dark-alt dark:focus-visible:outline-outline-dark-strong"
            aria-haspopup="true"
            x-on:keydown.space.prevent="openedWithKeyboard = true"
            x-on:keydown.enter.prevent="openedWithKeyboard = true"
            x-on:keydown.down.prevent="openedWithKeyboard = true"
            x-bind:class="isOpen || openedWithKeyboard ? 'text-light dark:text-on-surface-dark-strong' : 'text-on-surface dark:text-on-surface-dark'"
            x-bind:aria-expanded="isOpen || openedWithKeyboard"
          >
            Urutkan Berdasarkan
            <svg
              aria-hidden="true"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              stroke-width="2"
              stroke="currentColor"
              class="size-4 totate-0"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M19.5 8.25l-7.5 7.5-7.5-7.5"
              />
            </svg>
          </button>
          <!-- Dropdown Menu -->
          <div
            x-cloak
            x-show="isOpen || openedWithKeyboard"
            x-transition
            x-trap="openedWithKeyboard"
            x-on:click.outside="isOpen = false, openedWithKeyboard = false"
            x-on:keydown.down.prevent="$focus.wrap().next()"
            x-on:keydown.up.prevent="$focus.wrap().previous()"
            class="absolute top-11 left-0 flex w-fit min-w-48 flex-col overflow-hidden rounded-radius border border-outline bg-primary dark:border-outline-dark dark:bg-surface-dark-alt"
            role="menu"
          >
            <a
              href="#"
              class="bg-surface-alt px-4 py-2 text-sm text-on-surface hover:bg-surface-dark-alt/5 hover:text-light focus-visible:bg-surface-dark-alt/10 focus-visible:text-light focus-visible:outline-hidden dark:bg-surface-dark-alt dark:text-on-surface-dark dark:hover:bg-surface-alt/5 dark:hover:text-on-surface-dark-strong dark:focus-visible:bg-surface-alt/10 dark:focus-visible:text-on-surface-dark-strong"
              role="menuitem"
              >Nama Film</a
            >
            <a
              href="#"
              class="bg-surface-alt px-4 py-2 text-sm text-on-surface hover:bg-surface-dark-alt/5 hover:text-light focus-visible:bg-surface-dark-alt/10 focus-visible:text-light focus-visible:outline-hidden dark:bg-surface-dark-alt dark:text-on-surface-dark dark:hover:bg-surface-alt/5 dark:hover:text-on-surface-dark-strong dark:focus-visible:bg-surface-alt/10 dark:focus-visible:text-on-surface-dark-strong"
              role="menuitem"
              >Tanggal Rilis</a
            >
            <a
              href="#"
              class="bg-surface-alt px-4 py-2 text-sm text-on-surface hover:bg-surface-dark-alt/5 hover:text-light focus-visible:bg-surface-dark-alt/10 focus-visible:text-light focus-visible:outline-hidden dark:bg-surface-dark-alt dark:text-on-surface-dark dark:hover:bg-surface-alt/5 dark:hover:text-on-surface-dark-strong dark:focus-visible:bg-surface-alt/10 dark:focus-visible:text-on-surface-dark-strong"
              role="menuitem"
              >Rating</a
            >
          </div>
        </div>
      </div>
      <ul
        x-show="status.isLoading"
        class="flex lg:justify-between justify-center items-center p-5 flex-wrap gap-10 overflow-y-scroll h-[500px] hide-scrollbar"
      >
        <template
          x-for="(movie, index) in Array.from({ length: page })"
          :key="index"
        >
          <li class="w-[300px] h-[500px] flex flex-col">
            <img
              class="rounded-[10px] w-[300px] h-[450px] animate-pulse"
              src="../img/movie_card.png"
            />
          </li>
        </template>
      </ul>
      <ul
        x-show="!status.isLoading"
        class="flex lg:justify-between justify-center items-center p-5 flex-wrap gap-10 overflow-y-scroll h-[500px] hide-scrollbar"
      >
        <template x-for="(movie, index) in moviesCopy" :key="index">
          <li
            class="w-[300px] h-[500px] flex flex-col hover:cursor-pointer"
            @click="openMovie(movie.id)"
          >
            <img
              class="rounded-[10px] w-[300px] h-[450px] transition-all hover:drop-shadow-[0_0_10px_#646cffaa]"
              :src="movie.poster_path === null 
            ? '../img/movie_card.png' 
            : `https://image.tmdb.org/t/p/w300/${movie.poster_path}`"
              :alt="`poster-{index}`"
              srcset=""
            />
            <div class="w-full h-fit flex flex-col text-white">
              <h1 x-text="movie.title" class="poppins-medium text-sm mt-2"></h1>
              <h1
                x-text="movie.release_date.slice(0,4)"
                class="poppins-light text-sm"
              ></h1>
            </div>
          </li>
        </template>
      </ul>
    </main>
    <footer></footer>
  </body>
</html>
